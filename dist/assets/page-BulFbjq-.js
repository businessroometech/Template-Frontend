import{u as P,r as t,W as w,j as e,S as r,m as T,aH as C}from"./index-Cw_JW-sQ.js";import{C as I}from"./CreatePostCard-z4zjVNWv.js";import{I as b}from"./index.es-B3nd2sAs.js";import"./Modal-V1TsWTsR.js";const A=({isCreated:o})=>{const{user:a}=P(),[u,f]=t.useState([]),[n,m]=t.useState(!1),[l,d]=t.useState(null),h=t.useRef(!1),[j,y]=t.useState(1),[x,c]=t.useState(!0),[v,E]=t.useState(2);w();const g=async()=>{m(!1),c(!1),d(null);try{const s=await T({method:"POST",url:"api/v1/post/get-userpost-byUserId",data:{userId:a==null?void 0:a.id,page:1,limit:v}});if(s.message==="No posts found for this user."){c(!1);return}f(i=>[...i,...s.data.posts])}catch(s){console.error(JSON.stringify(s)),d("This User have no Posts")}finally{}};if(t.useEffect(()=>{h.current?o&&g():(g(),h.current=!0)},[j,o]),n)return e.jsx("div",{style:{minHeight:"110vh",padding:"16px"},children:[...Array(2)].map((s,i)=>e.jsx(p,{},i))});if(l)return e.jsxs("div",{children:["Error: ",l]});const S=()=>{!n&&x&&y(s=>s+1)},p=()=>e.jsxs("div",{style:{padding:"16px",marginBottom:"16px",borderRadius:"8px",border:"1px solid #e0e0e0",backgroundColor:"#ffffff"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[e.jsx(r,{circle:!0,width:50,height:50}),e.jsxs("div",{style:{marginLeft:"16px",flex:1},children:[e.jsx(r,{width:"60%",height:20}),e.jsx(r,{width:"40%",height:16,style:{marginTop:"8px"}})]})]}),e.jsx(r,{width:"100%",height:200}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx(r,{width:"80%",height:16}),e.jsx(r,{width:"95%",height:16,style:{marginTop:"8px"}}),e.jsx(r,{width:"60%",height:16,style:{marginTop:"8px"}})]})]});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"position-relative",style:{maxHeight:"500px",overflowY:"auto"},children:e.jsx(b,{dataLength:u.length,next:S,hasMore:x,loader:e.jsx("div",{children:[...Array(5)].map((s,i)=>e.jsx(p,{},i))}),endMessage:e.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:e.jsx("strong",{children:"No more posts are available."})})})})})},H=()=>{const[o,a]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Feed"}),e.jsx(I,{setIsCreated:a}),e.jsx(A,{isCreated:o})]})};export{H as default};
