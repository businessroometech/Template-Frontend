import{ck as ee,W as f,r as o,u as ae,br as se,bs as c,bt as te,j as e,c as oe,L as le,S as ne,cV as L,cW as re,cX as ce,bZ as N,bb as y,w as ie,y as de,B as w,by as me,R as he,bE as p,bV as ue,C,bW as M,bX as pe,aO as xe,bY as ge,ao as be,aQ as je,H as ve,bK as fe,m as P,cY as S,cZ as Ne}from"./index-Cw_JW-sQ.js";import{M as k,a as T,b as E,c as I}from"./Modal-V1TsWTsR.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=ee("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),we="#e3e3e3",Ce="#f2f2f2",Ee=({setIsCreated:x})=>{const R=[xe,ge,N,be,je,ve,L],{isTrue:V,toggle:i}=f(),{isTrue:O,toggle:g}=f(),{isTrue:D,toggle:F}=f(),[z,H]=o.useState(!1),{user:s}=ae(),q=se({title:c().required("Please enter event title"),description:c().required("Please enter event description"),duration:c().required("Please enter event duration"),location:c().required("Please enter event location"),guest:c().email("Please enter valid email").required("Please enter event guest email")}),{control:n,handleSubmit:U}=te({resolver:fe(q)}),[d,m]=o.useState(""),[b,Q]=o.useState(""),[h,$]=o.useState(""),[K,Pe]=o.useState([]),[W,j]=o.useState(!0),[r,X]=o.useState({});o.useEffect(()=>{z||Y()},[]);const Y=async()=>{try{j(!0);const a=await fetch("https://app-backend-8r74.onrender.com/api/v1/auth/get-user-Profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s==null?void 0:s.id})});if(!a.ok)throw new Error("Network response was not ok");const t=await a.json();j(!1),X(t.data)}catch(a){console.error("Error fetching user profile:",a)}finally{j(!1)}},Z=async a=>{if(!d.trim()){console.log("Thoughts cannot be empty.");return}try{const t=/#\w+/g,l=d.match(t)||[];console.log("------user--------",s,s==null?void 0:s.id),(await P({method:"POST",url:S,data:{userId:s==null?void 0:s.id,content:d,hashtags:l}})).data&&(m(""),x(!0))}catch(t){console.log("Error in the posting",t)}},[v,G]=o.useState([]),A=a=>{console.log("---In handleFileUpload---uploadedFiles----",v),console.log("-----files in params----",a),G([...v,...a]),console.log("---setted files---in my function",a)},B=async()=>{try{const a=await Ne(v,s==null?void 0:s.id);return console.log("---- response in the upload doc function ----",a),a}catch(a){return console.error("Error in the createpostcard:",a),!1}},J=async()=>{const a=await B();try{if(a){const t=/#\w+/g,l=b.match(t)||[];console.log("-------------awsIds----------------------------- :",K),(await P({method:"POST",url:S,data:{userId:s==null?void 0:s.id,content:b,hashtags:l,mediaKeys:a}})).data&&(console.log("went inside"),m(""),i(),setTimeout(()=>{x(!0)},1e3))}else console.log("Upload failed. Post not submitted.")}catch(t){console.log("Error in the posting",t)}},_=async()=>{try{const a=await B();if(console.log("video upload success",a),a){const t=/#\w+/g,l=h.match(t)||[];console.log("hashtags match",l),console.log("---videoupload----",h),console.log("---upload success---",a);const u={userId:s==null?void 0:s.id,content:h,hashtags:l,mediaKeys:a||[]};console.log("video request data",u),(await P({method:"POST",url:S,data:u})).data&&(m(""),g(),setTimeout(()=>{x(!0)},1e3))}else console.log("Upload failed. Post not submitted.")}catch(a){console.log("Error in the posting",a)}};return o.useState(!0),setTimeout(()=>{var a;((a=r==null?void 0:r.personalDetails)==null?void 0:a.profilePictureUploadId)===null&&setTimeout(()=>{H(!0)},3e3)},3e3),e.jsxs(e.Fragment,{children:[e.jsxs(oe,{className:"card-body",children:[e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx(le,{to:`/profile/feed/${s==null?void 0:s.id}`,children:e.jsx("div",{className:"avatar avatar-xs me-2",children:e.jsx("span",{role:"button",children:W?e.jsx(ne,{height:40,width:40,className:"rounded-circle",baseColor:we,highlightColor:Ce}):e.jsx("img",{className:"avatar-img rounded-circle",src:r.profileImgUrl?r.profileImgUrl:L,alt:"avatar3"})})})}),e.jsx("form",{className:"w-100",onSubmit:U(a=>{console.log("---- create event ----",a)}),children:e.jsx("textarea",{className:"form-control pe-4 border-0",rows:2,"data-autoresize":!0,placeholder:"Share your thoughts...",value:d,onChange:a=>m(a.target.value)})})]}),e.jsxs("ul",{className:"nav nav-pills nav-stack small fw-normal",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link bg-light py-1 px-2 mb-0",onClick:i,children:[e.jsx(re,{size:20,className:"text-success pe-2"}),"Photo"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link bg-light py-1 px-2 mb-0",onClick:g,children:[e.jsx(ce,{size:20,className:"text-info pe-2"}),"Video"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link bg-light py-1 px-2 mb-0",onClick:Z,children:[e.jsx(ye,{size:14,color:"#2f09ec",style:{marginRight:"3px"}}),"   Post"]})})]})]}),e.jsxs(k,{show:V,onHide:i,centered:!0,className:"fade",id:"feedActionPhoto",tabIndex:-1,"aria-labelledby":"feedActionPhotoLabel","aria-hidden":"true",children:[e.jsx(T,{closeButton:!0,children:e.jsx("h5",{className:"modal-title",id:"feedActionPhotoLabel",children:"Add post photo"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"d-flex mb-3 ",children:[e.jsx("div",{className:"avatar avatar-xs me-2",children:e.jsx("img",{className:"avatar-img rounded-circle",src:N,alt:""})}),e.jsx("form",{className:"w-100",children:e.jsx("textarea",{className:"form-control pe-4 fs-3 lh-1 border-0",rows:2,onChange:a=>Q(a.target.value),placeholder:"Share your thoughts...",value:b})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Upload attachment"}),e.jsx(y,{icon:ie,onFileUpload:A,showPreview:!0,text:"Drag here or click to upload photo."})]})]}),e.jsxs(I,{children:[e.jsx("button",{type:"button",className:"btn btn-danger-soft me-2","data-bs-dismiss":"modal",onClick:()=>i(),children:"Cancel"}),e.jsx("button",{type:"submit",onClick:J,className:"btn btn-success-soft",children:"Post"})]})]}),e.jsxs(k,{centered:!0,show:O,onHide:g,className:"fade",id:"feedActionVideo",tabIndex:-1,children:[e.jsx(T,{closeButton:!0,children:e.jsx("h5",{className:"modal-title",id:"feedActionVideoLabel",children:"Add post video"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("div",{className:"avatar avatar-xs me-2",children:e.jsx("img",{className:"avatar-img rounded-circle",src:N,alt:""})}),e.jsx("form",{className:"w-100",children:e.jsx("textarea",{onChange:a=>$(a.target.value),value:h,className:"form-control pe-4 fs-3 lh-1 border-0",rows:2,placeholder:"Share your thoughts...",defaultValue:""})})]}),e.jsx("div",{children:e.jsx(y,{label:"Upload attachment",onFileUpload:A,icon:de,showPreview:!0,text:"Drag here or click to upload video."})})]}),e.jsxs(I,{children:[e.jsxs(w,{variant:"danger-soft",type:"button",className:"me-2",children:[e.jsx(me,{className:"pe-1"})," Live video"]}),e.jsx("button",{type:"submit",onClick:_,className:"btn btn-success-soft",children:"Post"})]})]}),e.jsx(k,{show:D,onHide:F,centered:!0,className:"fade",id:"modalCreateEvents",tabIndex:-1,"aria-labelledby":"modalLabelCreateEvents","aria-hidden":"true",children:e.jsxs("form",{onSubmit:U(a=>{console.log("---- create event ----",a),console.log("Post button clicked")}),children:[e.jsx(T,{closeButton:!0,children:e.jsx("h5",{className:"modal-title",id:"modalLabelCreateEvents",children:"Create event"})}),e.jsx(E,{children:e.jsxs(he,{className:"g-4",children:[e.jsx(p,{name:"title",label:"Title",placeholder:"Event name here",containerClassName:"col-12",control:n}),e.jsx(ue,{name:"description",label:"Description",rows:2,placeholder:"Ex: topics, schedule, etc.",containerClassName:"col-12",control:n}),e.jsxs(C,{sm:4,children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx(M,{options:{enableTime:!1},type:"text",className:"form-control",placeholder:"Select date"})]}),e.jsxs(C,{sm:4,children:[e.jsx("label",{className:"form-label",children:"Time"}),e.jsx(M,{options:{enableTime:!0,noCalendar:!0},type:"text",className:"form-control",placeholder:"Select time"})]}),e.jsx(p,{name:"duration",label:"Duration",placeholder:"1hr 23m",containerClassName:"col-sm-4",control:n}),e.jsx(p,{name:"location",label:"Location",placeholder:"Logansport, IN 46947",containerClassName:"col-12",control:n}),e.jsx(p,{name:"guest",type:"email",label:"Add guests",placeholder:"Guest email",containerClassName:"col-12",control:n}),e.jsx(C,{xs:12,className:"mt-3",children:e.jsxs("ul",{className:"avatar-group list-unstyled align-items-center mb-0",children:[R.map((a,t)=>e.jsx("li",{className:"avatar avatar-xs",children:e.jsx("img",{className:"avatar-img rounded-circle",src:a,alt:"avatar"})},t)),e.jsx("li",{className:"ms-3",children:e.jsx("small",{children:" +50 "})})]})}),e.jsx("div",{className:"mb-3",children:e.jsx(y,{showPreview:!0,helpText:"Drop presentation and document here or click to upload.",icon:pe,label:"Upload attachment"})})]})}),e.jsxs(I,{children:[e.jsx(w,{variant:"danger-soft",type:"button",className:"me-2",onClick:F,children:"Cancel"}),e.jsx(w,{variant:"success-soft",type:"submit",children:"Create now"})]})]})})]})};export{Ee as C};
